<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>DocumentCloud Page Embed Test</title>
    <link type="text/css" rel="stylesheet" href="dist/page_embed.css"/>
    <script src="dist/page_embed.js"></script>
    <style>
    body {
      margin: 0;
      padding: 1em;
      font: 400 1em/1.6em 'Gotham', 'Proxima Nova', 'Avenir Next', Helvetica, Arial, sans-serif;
    }
    
    h1,
    h2 {
      font-weight: 300;
      line-height: 1.3em;
    }

    .main {
      margin: 0 auto;
      min-width: 320px;
      max-width: 960px;
    }

    header,
    section {
      margin-bottom: 3em;
    }

    .row {
      overflow: auto;
    }

    .col {
      float: left;
    }

    .DC-embed-iframe-wrapper {
      position: relative;
      height: 0;
      overflow: hidden;
      padding-bottom: 165%;
    }
    .DC-embed-iframe-wrapper > iframe {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      border: none;
      overflow: hidden;
    }

    </style>
  </head>
  <body>
    <div class="main width-target">
      <header>
        <h1>DocumentCloud Page Embed Testbed</h1>
        <p>This page is flexible with a min-width of 320px and a max-width of 960px. The current width is <b class="width">…</b>. Bold pixel counts will update as the window is resized.</p>
      </header>

      <section class="row">
        <div class="col width-target" style="width:50%;margin-right:2%;">
          <h3 class="width">…</h3>
          <div id="pym_page_embed_1"></div>
          <script src="dist/pym.js"></script>
          <script type="text/javascript">
            var pym_page_embed_1 = new pym.Parent('pym_page_embed_1', 'embed.html?slug=282753-lefler-thesis&page=57', {});
          </script>
        </div>
        <div class="col width-target" style="width:30%;margin-right:2%;">
          <h3 class="width">…</h3>
          <div id="pym_page_embed_2"></div>
          <script src="dist/pym.js"></script>
          <script type="text/javascript">
            var pym_page_embed_2 = new pym.Parent('pym_page_embed_2', 'embed.html?slug=282753-lefler-thesis&page=57', {});
          </script>
        </div>
        <div class="col width-target" style="width:15%;">
          <h3 class="width">…</h3>
          <div id="pym_page_embed_3"></div>
          <script src="dist/pym.js"></script>
          <script type="text/javascript">
            var pym_page_embed_3 = new pym.Parent('pym_page_embed_3', 'embed.html?slug=282753-lefler-thesis&page=57', {});
          </script>
        </div>
      </section>

      <!-- <section class="row">
        <div class="col width-target" style="width:50%;margin-right:2%;">
          <h3 class="width">…</h3>
          <div class="DC-embed-iframe-wrapper">
            <iframe src="embed.html?slug=282753-lefler-thesis&amp;page=57" scrolling="no"></iframe>
          </div>
        </div>
        <div class="col width-target" style="width:30%;margin-right:2%;">
          <h3 class="width">…</h3>
          <div class="DC-embed-iframe-wrapper">
            <iframe src="embed.html?slug=282753-lefler-thesis&amp;page=57" scrolling="no"></iframe>
          </div>
        </div>
        <div class="col width-target" style="width:15%;">
          <h3 class="width">…</h3>
          <div class="DC-embed-iframe-wrapper">
            <iframe src="embed.html?slug=282753-lefler-thesis&amp;page=57" scrolling="no"></iframe>
          </div>
        </div>
      </section> -->

      <section>
        <h2>Direct embed (no iframe)</h2>
        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
        <div class="width-target" style="float:right;width:50%;margin-left:5%;margin-bottom:5%">
          <h3 class="width">…</h3>
          <div id="page_embed" class="DC-embed"></div>
          <script>
            dc.embed.loadPage("https://www.documentcloud.org/documents/282753-lefler-thesis.json", {
              page: 57,
              container: '#page_embed'
            });
          </script>
        </div>
        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
      </section>

      <section>
        <h2>Pixel-match Document Viewer</h2>
        <p>When the viewport is wide enough, this will display at 702px, which means the page image will be rendered at its native 700px width. Useful for doing pixel-level comparisons with the workspace and Document Viewer.</p>
        <div class="width-target" style="max-width:702px;margin:0 auto">
          <h3 class="width">…</h3>
          <div id="pym_page_embed_4"></div>
          <script src="dist/pym.js"></script>
          <script type="text/javascript">
            var pym_page_embed_4 = new pym.Parent('pym_page_embed_4', 'embed.html?slug=282753-lefler-thesis&page=57', {});
          </script>
        </div>
      </section>

      <section class="width-target">
        <h2>Full width</h2>
        <h3 class="width">…</h3>
          <div id="pym_page_embed_5"></div>
          <script src="dist/pym.js"></script>
          <script type="text/javascript">
            var pym_page_embed_5 = new pym.Parent('pym_page_embed_5', 'embed.html?slug=282753-lefler-thesis&page=57', {});
          </script>
      </section>

    </div>
    
    <script type="text/javascript">
      (function(){
        var $ = dc.$;

        // Cache width indicators and their parents so we don't have to do 
        // expensive DOM lookups during `resize`;
        var $widths = $('.width');
        $widths.each(function(){
          $(this).data('target', $(this).closest('.width-target'));
        });

        var updateColWidths = function(){
          $widths.each(function(){
            $(this).text( $(this).data('target').css('width') );
          });
        };
        updateColWidths();

        $(window).on('resize', function() {
          updateColWidths();
        })
      })();
    </script>
  </body>
</html>
